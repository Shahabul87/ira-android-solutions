# API Service Configuration
# Optimized for API-first applications and microservices

# === PROJECT CONFIGURATION ===
PROJECT_NAME=api-service
PROJECT_TYPE=api
ENVIRONMENT=production
DEBUG=false
API_VERSION=v1
API_TITLE=API Service
API_DESCRIPTION=High-performance API service

# === SECURITY ===
SECRET_KEY=CHANGE_THIS_TO_RANDOM_64_CHAR_STRING
API_KEY_ENABLED=true
API_KEY_HEADER_NAME=X-API-Key
JWT_ENABLED=true
JWT_SECRET_KEY=CHANGE_THIS_TO_DIFFERENT_RANDOM_64_CHAR_STRING
ALGORITHM=RS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
ENFORCE_HTTPS=true

# === DATABASE ===
DATABASE_TYPE=postgresql
DB_HOST=db.api-service.com
DB_PORT=5432
DB_NAME=api_service
DB_USER=api_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
DB_POOL_SIZE=50  # Higher for API services
DB_MAX_OVERFLOW=100
DATABASE_READ_REPLICA=read-db.api-service.com
DATABASE_URL=postgresql://api_user:CHANGE_THIS@db.api-service.com:5432/api_service

# === REDIS ===
REDIS_HOST=redis.api-service.com
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_CLUSTER_ENABLED=true
REDIS_SENTINEL_ENABLED=true

# === API CONFIGURATION ===
API_PREFIX=/api/v1
API_DOCS_ENABLED=true
API_DOCS_URL=/docs
API_REDOC_URL=/redoc
OPENAPI_URL=/openapi.json
API_PLAYGROUND_ENABLED=true

# === AUTHENTICATION ===
AUTH_METHODS=api_key,jwt,oauth
API_KEY_ROTATION_DAYS=90
OAUTH_ENABLED=true
OAUTH_PROVIDER=auth0
AUTH0_DOMAIN=your-domain.auth0.com
AUTH0_CLIENT_ID=your-client-id
AUTH0_CLIENT_SECRET=your-client-secret
AUTH0_AUDIENCE=https://api.yourservice.com

# === RATE LIMITING ===
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STRATEGY=sliding_window  # sliding_window | token_bucket | fixed_window
DEFAULT_RATE_LIMIT=1000
DEFAULT_RATE_WINDOW=3600  # 1 hour
RATE_LIMIT_BY_API_KEY=true
RATE_LIMIT_BY_ENDPOINT=true
BURST_LIMIT=2000

# Rate limits by tier
TIER_FREE_LIMIT=100
TIER_BASIC_LIMIT=1000
TIER_PRO_LIMIT=10000
TIER_ENTERPRISE_LIMIT=100000

# === CORS ===
CORS_ENABLED=true
ALLOWED_ORIGINS=*  # Be specific in production
ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS,HEAD
ALLOWED_HEADERS=*
EXPOSE_HEADERS=X-Total-Count,X-Page-Count,X-Rate-Limit-Remaining
MAX_AGE=86400

# === PAGINATION ===
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100
PAGINATION_HEADER_ENABLED=true

# === CACHING ===
CACHE_ENABLED=true
CACHE_PROVIDER=redis  # redis | memcached | in-memory
CACHE_TTL_SECONDS=300
CACHE_KEY_PREFIX=api:v1:
ETAG_ENABLED=true
CONDITIONAL_REQUEST_ENABLED=true

# === WEBHOOKS ===
WEBHOOK_ENABLED=true
WEBHOOK_MAX_RETRIES=5
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_SIGNATURE_HEADER=X-Webhook-Signature
WEBHOOK_EVENTS=create,update,delete

# === MONITORING ===
MONITORING_ENABLED=true
METRICS_ENABLED=true
METRICS_PROVIDER=prometheus
PROMETHEUS_PORT=9090
TRACING_ENABLED=true
TRACING_PROVIDER=jaeger  # jaeger | zipkin | datadog
JAEGER_AGENT_HOST=jaeger.api-service.com
JAEGER_AGENT_PORT=6831

# === LOGGING ===
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_CORRELATION_ID=true
LOG_REQUEST_BODY=false  # GDPR compliance
LOG_RESPONSE_BODY=false
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD_MS=100

# === ERROR HANDLING ===
ERROR_INCLUDE_STACKTRACE=false
ERROR_INCLUDE_REQUEST_ID=true
ERROR_WEBHOOK_URL=https://errors.yourservice.com/webhook
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60

# === DOCUMENTATION ===
AUTO_GENERATE_DOCS=true
DOCS_AUTH_ENABLED=false
POSTMAN_COLLECTION_ENABLED=true
INSOMNIA_COLLECTION_ENABLED=true
ASYNC_API_ENABLED=true

# === VERSIONING ===
API_VERSIONING_STRATEGY=path  # path | header | query
API_VERSION_HEADER=X-API-Version
API_SUNSET_HEADER=X-API-Sunset
API_DEPRECATION_HEADER=X-API-Deprecation

# === TESTING ===
ENABLE_TEST_ENDPOINTS=false
MOCK_MODE_ENABLED=false
SANDBOX_ENABLED=true
SANDBOX_URL=https://sandbox-api.yourservice.com

# === PERFORMANCE ===
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKERS=4
WORKER_CONNECTIONS=1000
KEEPALIVE=5
GZIP_ENABLED=true
GZIP_MIN_SIZE=1000